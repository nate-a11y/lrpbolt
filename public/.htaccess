# ✅ Force correct MIME for JS, CSS, JSON, and PWA files
AddType application/javascript .js
AddType application/javascript .mjs
AddType application/json .json
AddType application/json .webmanifest
AddType text/css .css
AddType image/png .png
AddType image/x-icon .ico
AddType image/svg+xml .svg
AddType image/webp .webp

# ✅ React SPA routing fix
RewriteEngine On
RewriteBase /

# Exclude service worker files from SPA fallback
RewriteCond %{REQUEST_URI} !^/registerSW\.js$
RewriteCond %{REQUEST_URI} !^/service-worker\.js$
RewriteCond %{REQUEST_URI} !^/__/auth/handler$

# Don't rewrite actual files or directories
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Redirect all other requests to index.html
RewriteRule ^ index.html [L]
