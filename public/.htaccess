# ---------- MIME hints ----------
AddType application/javascript .js .mjs
AddType application/json .json .webmanifest
AddType text/css .css
AddType image/png .png
AddType image/x-icon .ico
AddType image/svg+xml .svg
AddType image/webp .webp

# ---------- React SPA + PWA routing ----------
RewriteEngine On
RewriteBase /

# 1) Serve existing files/directories as-is
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# 2) EXEMPT critical PWA files from rewrite
#    (must be at the web root to allow scope "/")
RewriteRule ^(firebase-messaging-sw\.js|sw\.js|service-worker\.js|manifest\.webmanifest|robots\.txt|sitemap\.xml)$ - [L]
RewriteRule ^icons/ - [L]
RewriteRule ^assets/ - [L]

# 3) Everything else -> index.html (SPA fallback)
RewriteRule . /index.html [L]
